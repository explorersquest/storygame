<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>FÃ¼r Luisa ðŸŒ¸</title>

<style>
html, body {
  height: 100%;
  margin: 0;
  font-family: Georgia, serif;
  background: radial-gradient(circle at top, #0a0a0a, #1a1a2e);
  color: #ffd700;
  overflow: hidden;
}

/* START OVERLAY */
#startOverlay {
  position: fixed;
  inset: 0;
  background: rgba(5,5,15,0.6);
  backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  transition: opacity 0.8s ease;
}

#startBtn {
  padding: 20px 60px;
  font-size: 28px;
  border-radius: 18px;
  border: none;
  cursor: pointer;
  font-weight: bold;
  color: #ffd700;
  background: linear-gradient(145deg, #6655aa, #444477);
  box-shadow: 0 0 30px rgba(255,215,0,0.5);
}

/* TITEL */
h1 {
  text-align: center;
  margin-top: 40px;
  text-shadow: 0 0 10px #ffd700;
}
h2 {
  text-align: center;
  margin-top: 5px;
  opacity: 0.85;
}

/* HAUPTMENÃœ */
#mainMenu {
  height: calc(100% - 160px);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  gap: 20px;
}

#mainMenu button {
  padding: 20px 40px;
  font-size: 22px;
  font-weight: bold;
  border-radius: 15px;
  border: none;
  cursor: pointer;
  color: #ffd700;
  background: linear-gradient(145deg, #6655aa, #444477);
}

/* CHAT */
#chatContainer {
  display: none;
  flex-direction: column;
  width: 80%;
  max-width: 600px;
  height: 70vh;
  margin: 0 auto;
  background: rgba(30,30,50,0.9);
  border-radius: 15px;
  padding: 20px;
}

#chatMessages {
  flex: 1;
  overflow-y: auto;
  margin-bottom: 10px;
}

.myMessage {
  align-self: flex-end;
  background: rgba(0,120,255,0.2);
  color: #4db8ff;
  padding: 8px 12px;
  border-radius: 12px;
  margin: 5px 0;
}

.theirMessage {
  align-self: flex-start;
  background: rgba(255,77,192,0.2);
  color: #ff77cc;
  padding: 8px 12px;
  border-radius: 12px;
  margin: 5px 0;
}

#chatInput {
  padding: 10px;
  border-radius: 8px;
  border: none;
  font-size: 16px;
}

#chatContainer button {
  margin-top: 10px;
  padding: 10px;
  border-radius: 8px;
  border: none;
  font-weight: bold;
  cursor: pointer;
  background: #444477;
  color: #ffd700;
}

/* STERNE */
.star {
  position: absolute;
  width: 2px;
  height: 2px;
  background: white;
  border-radius: 50%;
  opacity: 0.8;
  animation: twinkle 2s infinite alternate, floatStars 6s infinite alternate;
}

@keyframes twinkle {
  from {opacity:0.3;}
  to {opacity:1;}
}
@keyframes floatStars {
  from {transform: translate(0,0);}
  to {transform: translate(1.5px,-1.5px);}
}

/* STERNSCHNUPPE */
.shooting-star {
  position: absolute;
  width: 2px;
  height: 2px;
  background: white;
  border-radius: 50%;
  transform: rotate(-45deg);
}
.shooting-star::after {
  content:'';
  position:absolute;
  left:-60px;
  width:60px;
  height:2px;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.8));
}
@keyframes shoot {
  from {transform: translate(0,0) rotate(-45deg); opacity:1;}
  to {transform: translate(-900px,900px) rotate(-45deg); opacity:0;}
}
</style>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>

<body>

<div id="startOverlay">
  <button id="startBtn">Start âœ¨</button>
</div>

<h1>FÃ¼r Luisa ðŸŒ¸</h1>
<h2>Fr4gm3nt3</h2>

<div id="mainMenu">
  <button id="openChatBtn">Deine Gedanken</button>
  <div style="font-size:13px;opacity:0.6;">Version 2.16.2.2</div>
</div>

<div id="chatContainer">
  <h2>Deine Gedanken ðŸŒ™</h2>
  <div id="chatMessages"></div>
  <input id="chatInput" placeholder="Schreibe etwas â€¦">
  <button id="sendChatBtn">Abschicken</button>
  <button id="backFromChatBtn">ZurÃ¼ck</button>
</div>

<audio id="bgMusic" src="momedeiros88-mystical.mp3" loop></audio>
<audio id="clickSound" src="magic-button-click.mp3"></audio>

<script>
/******** STERNE ********/
for(let i=0;i<80;i++){
  const s=document.createElement('div');
  s.className='star';
  s.style.top=Math.random()*100+'%';
  s.style.left=Math.random()*100+'%';
  document.body.appendChild(s);
}
setInterval(()=>{
  if(Math.random()<0.4){
    const s=document.createElement('div');
    s.className='shooting-star';
    s.style.left=(window.innerWidth*0.5+Math.random()*window.innerWidth*0.5)+'px';
    s.style.top='-20px';
    s.style.animation='shoot 1.5s linear forwards';
    document.body.appendChild(s);
    setTimeout(()=>s.remove(),1500);
  }
},6000);

/******** FIREBASE ********/
firebase.initializeApp({
  apiKey: "AIzaSyD_cDHNMZZiLuGLfAntYAc8ONtKgwYlp9Y",
  authDomain: "luisaglobalchat.firebaseapp.com",
  projectId: "luisaglobalchat"
});
const db=firebase.firestore();
const chatCollection=db.collection("chatMessages");

/******** DEVICE ********/
let deviceId=localStorage.getItem("luisaDeviceId");
if(!deviceId){
  deviceId="device_"+Math.random().toString(36).substr(2,9);
  localStorage.setItem("luisaDeviceId",deviceId);
}

/******** AUDIO ********/
const music=document.getElementById("bgMusic");
const clickSound=document.getElementById("clickSound");
music.volume=0.6;

/******** UI ********/
startBtn.onclick=()=>{
  music.play().catch(()=>{});
  startOverlay.style.opacity=0;
  setTimeout(()=>startOverlay.remove(),800);
};
openChatBtn.onclick=()=>{
  mainMenu.style.display="none";
  chatContainer.style.display="flex";
  loadChat();
};
backFromChatBtn.onclick=()=>{
  chatContainer.style.display="none";
  mainMenu.style.display="flex";
};
document.addEventListener("click",e=>{
  if(e.target.closest("button")){
    clickSound.currentTime=0;
    clickSound.play().catch(()=>{});
  }
});

/******** CHAT ********/
sendChatBtn.onclick=()=>{
  const t=chatInput.value.trim();
  if(!t)return;
  chatCollection.add({
    text:t,
    sender:deviceId,
    timestamp:firebase.firestore.FieldValue.serverTimestamp()
  });
  chatInput.value="";
};

function loadChat(){
  chatCollection.orderBy("timestamp").onSnapshot(s=>{
    chatMessages.innerHTML="";
    s.forEach(d=>{
      const div=document.createElement("div");
      div.className=d.data().sender===deviceId?"myMessage":"theirMessage";
      div.innerText=d.data().text;
      chatMessages.appendChild(div);
    });
    chatMessages.scrollTop=chatMessages.scrollHeight;
  });
}
</script>

</body>
</html>
